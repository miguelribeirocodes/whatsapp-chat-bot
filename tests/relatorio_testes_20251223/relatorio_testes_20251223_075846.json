{
  "resumo": {
    "total": 10,
    "passou": 6,
    "falhou": 4,
    "taxa_sucesso": 60.0
  },
  "testes": [
    {
      "nome": "Menu principal -> Agendar -> Voltar -> Menu (validado)",
      "timestamp": "2025-12-23T07:58:25.622278",
      "sequencia": [
        "1",
        "9"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "9",
          "resposta": "OperaÃ§Ã£o cancelada.\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "agendar",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": false,
      "erro": null,
      "detalhes": "ValidaÃ§Ã£o customizada falhou"
    },
    {
      "nome": "Menu principal -> Agendar -> Semana -> Dia -> HorÃ¡rio -> Confirmar (validado)",
      "timestamp": "2025-12-23T07:58:25.622278",
      "sequencia": [
        "1",
        "1",
        "1",
        "1",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1ï¸âƒ£ TerÃ§a-feira, 23/12/2025\n2ï¸âƒ£ Quarta-feira, 24/12/2025\n3ï¸âƒ£ Quinta-feira, 25/12/2025\n4ï¸âƒ£ Sexta-feira, 26/12/2025\nâ¬…ï¸ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o horÃ¡rio:\n1ï¸âƒ£ 15:00\n2ï¸âƒ£ 16:00\nâ¬…ï¸ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_horario",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Confirma o agendamento para TerÃ§a-feira, 23/12/2025 Ã s 15:00?",
          "estado_anterior": "escolher_horario",
          "estado_atual": "confirmar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "âœ… Agendamento *confirmado* com sucesso!\n\nðŸ“… Data: TerÃ§a-feira, 23/12/2025\nðŸ• HorÃ¡rio: 15:00\n\nVocÃª receberÃ¡ um lembrete 24 horas antes da consulta.\nAtÃ© lÃ¡!\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "confirmar",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": ""
    },
    {
      "nome": "Menu -> Cancelar (sem agendamentos)",
      "timestamp": "2025-12-23T07:58:40.515238",
      "sequencia": [
        "3"
      ],
      "respostas": [
        {
          "input": "3",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "cancelar",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 159, in processar_mensagem\n    return processar_mensagem(usuario_id, '')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 272, in processar_mensagem\n    return format_appointment_list(agendamentos, 'cancelar')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 86, in format_appointment_list\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada '3': ModuleNotFoundError: No module named 'messages'"
    },
    {
      "nome": "Menu principal com input invÃ¡lido (validado)",
      "timestamp": "2025-12-23T07:58:40.788733",
      "sequencia": [
        "abc",
        "1"
      ],
      "respostas": [
        {
          "input": "abc",
          "resposta": "OpÃ§Ã£o invÃ¡lida. Escolha uma das opÃ§Ãµes abaixo:\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": ""
    },
    {
      "nome": "Agendar com input aleatÃ³rio em semana",
      "timestamp": "2025-12-23T07:58:40.788733",
      "sequencia": [
        "1",
        "xyz",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "xyz",
          "resposta": "OpÃ§Ã£o invÃ¡lida.. Escolha uma semana:\nEscolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1ï¸âƒ£ TerÃ§a-feira, 23/12/2025\n2ï¸âƒ£ Quarta-feira, 24/12/2025\n3ï¸âƒ£ Quinta-feira, 25/12/2025\n4ï¸âƒ£ Sexta-feira, 26/12/2025\nâ¬…ï¸ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": "SequÃªncia executada sem erros"
    },
    {
      "nome": "Agendar -> Semana -> input invÃ¡lido dia",
      "timestamp": "2025-12-23T07:58:41.887078",
      "sequencia": [
        "1",
        "1",
        "999",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1ï¸âƒ£ TerÃ§a-feira, 23/12/2025\n2ï¸âƒ£ Quarta-feira, 24/12/2025\n3ï¸âƒ£ Quinta-feira, 25/12/2025\n4ï¸âƒ£ Sexta-feira, 26/12/2025\nâ¬…ï¸ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "999",
          "resposta": "OpÃ§Ã£o invÃ¡lida.. Escolha um dia:\nEscolha o dia:\n1ï¸âƒ£ TerÃ§a-feira, 23/12/2025\n2ï¸âƒ£ Quarta-feira, 24/12/2025\n3ï¸âƒ£ Quinta-feira, 25/12/2025\n4ï¸âƒ£ Sexta-feira, 26/12/2025\nâ¬…ï¸ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o horÃ¡rio:\n1ï¸âƒ£ 16:00\nâ¬…ï¸ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_horario",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": "SequÃªncia executada sem erros"
    },
    {
      "nome": "Input vazio no menu",
      "timestamp": "2025-12-23T07:58:46.379002",
      "sequencia": [
        "",
        "1"
      ],
      "respostas": [
        {
          "input": "",
          "resposta": "OpÃ§Ã£o invÃ¡lida. Escolha uma das opÃ§Ãµes abaixo:\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": "SequÃªncia executada sem erros"
    },
    {
      "nome": "SaudaÃ§Ã£o com espaÃ§os extras (validado)",
      "timestamp": "2025-12-23T07:58:46.379002",
      "sequencia": [
        "  oi  ",
        "1"
      ],
      "respostas": [
        {
          "input": "  oi  ",
          "resposta": "OlÃ¡! Seja bem-vindo(a)!\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": ""
    },
    {
      "nome": "Menu -> Agendar -> Voltar -> Menu -> Reagendar (validado)",
      "timestamp": "2025-12-23T07:58:46.379002",
      "sequencia": [
        "1",
        "9",
        "2"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1ï¸âƒ£ Esta semana\n2ï¸âƒ£ PrÃ³xima semana\nâ¬…ï¸ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "9",
          "resposta": "OperaÃ§Ã£o cancelada.\nSou a secretÃ¡ria virtual da ClÃ­nica X.\nSelecione uma opÃ§Ã£o",
          "estado_anterior": "agendar",
          "estado_atual": "menu_principal",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "2",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "reagendar",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 154, in processar_mensagem\n    return processar_mensagem(usuario_id, '')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 221, in processar_mensagem\n    return format_appointment_list(agendamentos, 'reagendar')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 86, in format_appointment_list\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada '2': ModuleNotFoundError: No module named 'messages'"
    },
    {
      "nome": "Menu -> Cancelar -> Voltar -> Agendar (validado)",
      "timestamp": "2025-12-23T07:58:46.629443",
      "sequencia": [
        "3",
        "9",
        "1"
      ],
      "respostas": [
        {
          "input": "3",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "cancelar",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 288, in processar_mensagem\n    idx = int(mensagem) - 1\n          ^^^^^^^^^^^^^\nValueError: invalid literal for int() with base 10: ''\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 159, in processar_mensagem\n    return processar_mensagem(usuario_id, '')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 310, in processar_mensagem\n    return f\"{MSG.INVALID_OPTION} {format_appointment_list(agendamentos, 'cancelar')}\"\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 86, in format_appointment_list\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada '3': ModuleNotFoundError: No module named 'messages'"
    }
  ]
}