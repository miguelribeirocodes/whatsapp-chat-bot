{
  "resumo": {
    "total": 10,
    "passou": 2,
    "falhou": 8,
    "taxa_sucesso": 20.0
  },
  "testes": [
    {
      "nome": "Menu principal -> Agendar -> Voltar -> Menu (validado)",
      "timestamp": "2025-12-23T07:52:47.685829",
      "sequencia": [
        "1",
        "9"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "9",
          "resposta": null,
          "estado_anterior": "agendar",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'constants'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 180, in processar_mensagem\n    cleanup_agendamento_session(sessoes, usuario_id)\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 197, in cleanup_agendamento_session\n    cleanup_session_keys(sessoes, usuario_id, [\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 186, in cleanup_session_keys\n    from constants import SessionKeys\nModuleNotFoundError: No module named 'constants'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'constants'",
      "detalhes": "Falhou na entrada '9': ModuleNotFoundError: No module named 'constants'"
    },
    {
      "nome": "Menu principal -> Agendar -> Semana -> Dia -> Horário -> Confirmar (validado)",
      "timestamp": "2025-12-23T07:52:47.687832",
      "sequencia": [
        "1",
        "1",
        "1",
        "1",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1️⃣ Terça-feira, 23/12/2025\n2️⃣ Quarta-feira, 24/12/2025\n3️⃣ Quinta-feira, 25/12/2025\n4️⃣ Sexta-feira, 26/12/2025\n⬅️ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o horário:\n1️⃣ 11:00\n2️⃣ 14:00\n3️⃣ 15:00\n4️⃣ 16:00\n⬅️ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_horario",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Confirma o agendamento para Terça-feira, 23/12/2025 às 11:00?",
          "estado_anterior": "escolher_horario",
          "estado_atual": "confirmar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": null,
          "estado_anterior": "confirmar",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'constants'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 491, in processar_mensagem\n    cleanup_agendamento_session(sessoes, usuario_id)\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 197, in cleanup_agendamento_session\n    cleanup_session_keys(sessoes, usuario_id, [\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 186, in cleanup_session_keys\n    from constants import SessionKeys\nModuleNotFoundError: No module named 'constants'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'constants'",
      "detalhes": "Falhou na entrada '1': ModuleNotFoundError: No module named 'constants'"
    },
    {
      "nome": "Menu -> Cancelar (sem agendamentos)",
      "timestamp": "2025-12-23T07:52:53.970882",
      "sequencia": [
        "3"
      ],
      "respostas": [
        {
          "input": "3",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "cancelar",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'agenda_service'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 159, in processar_mensagem\n    return processar_mensagem(usuario_id, '')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 263, in processar_mensagem\n    agendamentos = get_future_appointments()\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 231, in get_future_appointments\n    from agenda_service import obter_todos_agenda_cached\nModuleNotFoundError: No module named 'agenda_service'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'agenda_service'",
      "detalhes": "Falhou na entrada '3': ModuleNotFoundError: No module named 'agenda_service'"
    },
    {
      "nome": "Menu principal com input inválido (validado)",
      "timestamp": "2025-12-23T07:52:53.973880",
      "sequencia": [
        "abc",
        "1"
      ],
      "respostas": [
        {
          "input": "abc",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 168, in processar_mensagem\n    menu_text, _ = exibir_menu_principal()\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 86, in exibir_menu_principal\n    return build_main_menu()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 315, in build_main_menu\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada 'abc': ModuleNotFoundError: No module named 'messages'"
    },
    {
      "nome": "Agendar com input aleatório em semana",
      "timestamp": "2025-12-23T07:52:53.975883",
      "sequencia": [
        "1",
        "xyz",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "xyz",
          "resposta": "Opção inválida.. Escolha uma semana:\nEscolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1️⃣ Terça-feira, 23/12/2025\n2️⃣ Quarta-feira, 24/12/2025\n3️⃣ Quinta-feira, 25/12/2025\n4️⃣ Sexta-feira, 26/12/2025\n⬅️ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": "Sequência executada sem erros"
    },
    {
      "nome": "Agendar -> Semana -> input inválido dia",
      "timestamp": "2025-12-23T07:52:55.120868",
      "sequencia": [
        "1",
        "1",
        "999",
        "1"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o dia:\n1️⃣ Terça-feira, 23/12/2025\n2️⃣ Quarta-feira, 24/12/2025\n3️⃣ Quinta-feira, 25/12/2025\n4️⃣ Sexta-feira, 26/12/2025\n⬅️ Voltar",
          "estado_anterior": "agendar",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "999",
          "resposta": "Opção inválida.. Escolha um dia:\nEscolha o dia:\n1️⃣ Terça-feira, 23/12/2025\n2️⃣ Quarta-feira, 24/12/2025\n3️⃣ Quinta-feira, 25/12/2025\n4️⃣ Sexta-feira, 26/12/2025\n⬅️ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_dia",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "1",
          "resposta": "Escolha o horário:\n1️⃣ 14:00\n2️⃣ 15:00\n3️⃣ 16:00\n⬅️ Voltar",
          "estado_anterior": "escolher_dia",
          "estado_atual": "escolher_horario",
          "sucesso": true,
          "erro": null
        }
      ],
      "passou": true,
      "erro": null,
      "detalhes": "Sequência executada sem erros"
    },
    {
      "nome": "Input vazio no menu",
      "timestamp": "2025-12-23T07:52:59.877011",
      "sequencia": [
        "",
        "1"
      ],
      "respostas": [
        {
          "input": "",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 168, in processar_mensagem\n    menu_text, _ = exibir_menu_principal()\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 86, in exibir_menu_principal\n    return build_main_menu()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 315, in build_main_menu\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada '': ModuleNotFoundError: No module named 'messages'"
    },
    {
      "nome": "Saudação com espaços extras (validado)",
      "timestamp": "2025-12-23T07:52:59.884018",
      "sequencia": [
        "  oi  ",
        "1"
      ],
      "respostas": [
        {
          "input": "  oi  ",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'messages'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 122, in processar_mensagem\n    menu_text, _ = exibir_menu_principal()\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 86, in exibir_menu_principal\n    return build_main_menu()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 315, in build_main_menu\n    import messages as MSG\nModuleNotFoundError: No module named 'messages'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'messages'",
      "detalhes": "Falhou na entrada '  oi  ': ModuleNotFoundError: No module named 'messages'"
    },
    {
      "nome": "Menu -> Agendar -> Voltar -> Menu -> Reagendar (validado)",
      "timestamp": "2025-12-23T07:52:59.884018",
      "sequencia": [
        "1",
        "9",
        "2"
      ],
      "respostas": [
        {
          "input": "1",
          "resposta": "Escolha a semana:\n1️⃣ Esta semana\n2️⃣ Próxima semana\n⬅️ Voltar",
          "estado_anterior": "menu_principal",
          "estado_atual": "agendar",
          "sucesso": true,
          "erro": null
        },
        {
          "input": "9",
          "resposta": null,
          "estado_anterior": "agendar",
          "estado_atual": "menu_principal",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'constants'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 180, in processar_mensagem\n    cleanup_agendamento_session(sessoes, usuario_id)\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 197, in cleanup_agendamento_session\n    cleanup_session_keys(sessoes, usuario_id, [\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 186, in cleanup_session_keys\n    from constants import SessionKeys\nModuleNotFoundError: No module named 'constants'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'constants'",
      "detalhes": "Falhou na entrada '9': ModuleNotFoundError: No module named 'constants'"
    },
    {
      "nome": "Menu -> Cancelar -> Voltar -> Agendar (validado)",
      "timestamp": "2025-12-23T07:52:59.884018",
      "sequencia": [
        "3",
        "9",
        "1"
      ],
      "respostas": [
        {
          "input": "3",
          "resposta": null,
          "estado_anterior": "menu_principal",
          "estado_atual": "cancelar",
          "sucesso": false,
          "erro": "ModuleNotFoundError: No module named 'agenda_service'",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\tests\\test_fluxo_conversacional.py\", line 91, in simular_mensagem\n    resposta = processar_mensagem(self.usuario_id, texto_mensagem)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 159, in processar_mensagem\n    return processar_mensagem(usuario_id, '')\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\whatsapp_flow.py\", line 263, in processar_mensagem\n    agendamentos = get_future_appointments()\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\OneDrive - NORTETEL\\Documentos\\Miguel\\Chat Bot Agendador\\src\\flow_helpers.py\", line 231, in get_future_appointments\n    from agenda_service import obter_todos_agenda_cached\nModuleNotFoundError: No module named 'agenda_service'\n"
        }
      ],
      "passou": false,
      "erro": "ModuleNotFoundError: No module named 'agenda_service'",
      "detalhes": "Falhou na entrada '3': ModuleNotFoundError: No module named 'agenda_service'"
    }
  ]
}